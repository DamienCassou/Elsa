(require 'elsa-types)
(require 'elsa-type-helpers)

;; File: data.c
(put 'eq 'elsa-type (elsa-make-type Mixed -> Mixed -> Bool))
(put 'null 'elsa-type (elsa-make-type Mixed -> Bool))
;; (put 'type-of 'elsa-type)
;; (put 'consp 'elsa-type)
;; (put 'atom 'elsa-type)
;; (put 'listp 'elsa-type)
;; (put 'nlistp 'elsa-type)
;; (put 'symbolp 'elsa-type)
;; (put 'keywordp 'elsa-type)
;; (put 'vectorp 'elsa-type)
;; (put 'stringp 'elsa-type)
;; (put 'multibyte-string-p 'elsa-type)
;; (put 'char-table-p 'elsa-type)
;; (put 'vector-or-char-table-p 'elsa-type)
;; (put 'bool-vector-p 'elsa-type)
;; (put 'arrayp 'elsa-type)
;; (put 'sequencep 'elsa-type)
;; (put 'bufferp 'elsa-type)
;; (put 'markerp 'elsa-type)
;; (put 'user-ptrp 'elsa-type)
;; (put 'subrp 'elsa-type)
;; (put 'byte-code-function-p 'elsa-type)
;; (put 'char-or-string-p 'elsa-type)
;; (put 'integerp 'elsa-type)
;; (put 'integer-or-marker-p 'elsa-type)
;; (put 'natnump 'elsa-type)
;; (put 'numberp 'elsa-type)
;; (put 'number-or-marker-p 'elsa-type)
;; (put 'floatp 'elsa-type)
;; (put 'car 'elsa-type)
;; (put 'car-safe 'elsa-type)
;; (put 'cdr 'elsa-type)
;; (put 'cdr-safe 'elsa-type)
;; (put 'setcar 'elsa-type)
;; (put 'setcdr 'elsa-type)
;; (put 'boundp 'elsa-type)
;; (put 'fboundp 'elsa-type)
;; (put 'makunbound 'elsa-type)
;; (put 'fmakunbound 'elsa-type)
;; (put 'symbol-function 'elsa-type)
;; (put 'symbol-plist 'elsa-type)
;; (put 'symbol-name 'elsa-type)
;; (put 'fset 'elsa-type)
;; (put 'defalias 'elsa-type)
;; (put 'setplist 'elsa-type)
;; (put 'subr-arity 'elsa-type)
;; (put 'subr-name 'elsa-type)
;; (put 'interactive-form 'elsa-type)
;; (put 'indirect-variable 'elsa-type)
;; (put 'symbol-value 'elsa-type)
;; (put 'set 'elsa-type)
;; (put 'default-boundp 'elsa-type)
;; (put 'default-value 'elsa-type)
;; (put 'set-default 'elsa-type)
;; (put 'setq-default 'elsa-type)
;; (put 'make-variable-buffer-local 'elsa-type)
;; (put 'make-local-variable 'elsa-type)
;; (put 'kill-local-variable 'elsa-type)
;; (put 'make-variable-frame-local 'elsa-type)
;; (put 'local-variable-p 'elsa-type)
;; (put 'local-variable-if-set-p 'elsa-type)
;; (put 'variable-binding-locus 'elsa-type)
;; (put 'terminal-local-value 'elsa-type)
;; (put 'set-terminal-local-value 'elsa-type)
;; (put 'indirect-function 'elsa-type)
;; (put 'aref 'elsa-type)
;; (put 'aset 'elsa-type)
;; (put '= 'elsa-type)
;; (put '< 'elsa-type)
;; (put '> 'elsa-type)
;; (put '<= 'elsa-type)
;; (put '>= 'elsa-type)
;; (put '/= 'elsa-type)
;; (put 'number-to-string 'elsa-type)
;; (put 'string-to-number 'elsa-type)
;; (put '+ 'elsa-type)
;; (put '- 'elsa-type)
;; (put '* 'elsa-type)
;; (put '/ 'elsa-type)
;; (put '% 'elsa-type)
;; (put 'mod 'elsa-type)
;; (put 'max 'elsa-type)
;; (put 'min 'elsa-type)
;; (put 'logand 'elsa-type)
;; (put 'logior 'elsa-type)
;; (put 'logxor 'elsa-type)
;; (put 'ash 'elsa-type)
;; (put 'lsh 'elsa-type)
(put '1+ 'elsa-type (elsa-make-type Number | Marker -> Int))
(put '1- 'elsa-type (elsa-make-type Number | Marker -> Int))
;; (put 'lognot 'elsa-type)
;; (put 'byteorder 'elsa-type)
;; (put 'bool-vector-exclusive-or 'elsa-type)
;; (put 'bool-vector-union 'elsa-type)
;; (put 'bool-vector-intersection 'elsa-type)
;; (put 'bool-vector-set-difference 'elsa-type)
;; (put 'bool-vector-subsetp 'elsa-type)
;; (put 'bool-vector-not 'elsa-type)
;; (put 'bool-vector-count-population 'elsa-type)
;; (put 'bool-vector-count-consecutive 'elsa-type)


;; File: fns.c
;; (put 'identity 'elsa-type)
;; (put 'random 'elsa-type)
(put 'length 'elsa-type (elsa-make-type List -> Int))
;; (put 'safe-length 'elsa-type)
;; (put 'string-bytes 'elsa-type)
;; (put 'string-equal 'elsa-type)
;; (put 'compare-strings 'elsa-type)
;; (put 'string-lessp 'elsa-type)
;; (put 'string-collate-lessp 'elsa-type)
;; (put 'string-collate-equalp 'elsa-type)
;; (put 'append 'elsa-type)
;; (put 'concat 'elsa-type)
;; (put 'vconcat 'elsa-type)
;; (put 'copy-sequence 'elsa-type)
;; (put 'string-make-multibyte 'elsa-type)
;; (put 'string-make-unibyte 'elsa-type)
;; (put 'string-as-unibyte 'elsa-type)
;; (put 'string-as-multibyte 'elsa-type)
;; (put 'string-to-multibyte 'elsa-type)
;; (put 'string-to-unibyte 'elsa-type)
;; (put 'copy-alist 'elsa-type)
;; (put 'substring 'elsa-type)
;; (put 'substring-no-properties 'elsa-type)
;; (put 'nthcdr 'elsa-type)
;; (put 'nth 'elsa-type)
;; (put 'elt 'elsa-type)
;; (put 'member 'elsa-type)
;; (put 'memq 'elsa-type)
;; (put 'memql 'elsa-type)
;; (put 'assq 'elsa-type)
;; (put 'assoc 'elsa-type)
;; (put 'rassq 'elsa-type)
;; (put 'rassoc 'elsa-type)
;; (put 'delq 'elsa-type)
;; (put 'delete 'elsa-type)
;; (put 'nreverse 'elsa-type)
;; (put 'reverse 'elsa-type)
;; (put 'sort 'elsa-type)
;; (put 'plist-get 'elsa-type)
;; (put 'get 'elsa-type)
;; (put 'plist-put 'elsa-type)
;; (put 'put 'elsa-type)
;; (put 'lax-plist-get 'elsa-type)
;; (put 'lax-plist-put 'elsa-type)
;; (put 'eql 'elsa-type)
;; (put 'equal 'elsa-type)
;; (put 'equal-including-properties 'elsa-type)
;; (put 'fillarray 'elsa-type)
;; (put 'clear-string 'elsa-type)
;; (put 'nconc 'elsa-type)
;; (put 'mapconcat 'elsa-type)
;; (put 'mapcar 'elsa-type)
;; (put 'mapc 'elsa-type)
;; (put 'yes-or-no-p 'elsa-type)
;; (put 'load-average 'elsa-type)
;; (put 'featurep 'elsa-type)
;; (put 'provide 'elsa-type)
;; (put 'require 'elsa-type)
;; (put 'plist-member 'elsa-type)
;; (put 'widget-put 'elsa-type)
;; (put 'widget-get 'elsa-type)
;; (put 'widget-apply 'elsa-type)
;; (put 'locale-info 'elsa-type)
;; (put 'base64-encode-region 'elsa-type)
;; (put 'base64-encode-string 'elsa-type)
;; (put 'base64-decode-region 'elsa-type)
;; (put 'base64-decode-string 'elsa-type)
;; (put 'sxhash 'elsa-type)
;; (put 'make-hash-table 'elsa-type)
;; (put 'copy-hash-table 'elsa-type)
;; (put 'hash-table-count 'elsa-type)
;; (put 'hash-table-rehash-size 'elsa-type)
;; (put 'hash-table-rehash-threshold 'elsa-type)
;; (put 'hash-table-size 'elsa-type)
;; (put 'hash-table-test 'elsa-type)
;; (put 'hash-table-weakness 'elsa-type)
;; (put 'hash-table-p 'elsa-type)
;; (put 'clrhash 'elsa-type)
;; (put 'gethash 'elsa-type)
;; (put 'puthash 'elsa-type)
;; (put 'remhash 'elsa-type)
;; (put 'maphash 'elsa-type)
;; (put 'define-hash-table-test 'elsa-type)
;; (put 'md5 'elsa-type)
;; (put 'secure-hash 'elsa-type)

;; boolean functions
(put 'not 'elsa-type (elsa-make-type Mixed -> Bool))

;; type specifiers
(put 'stringp 'elsa-type (elsa-make-type Mixed -> Bool))
(put 'vectorp 'elsa-type (elsa-make-type Mixed -> Bool))
(put 'integerp 'elsa-type (elsa-make-type Mixed -> Bool))
(put 'numberp 'elsa-type (elsa-make-type Mixed -> Bool))
(put 'floatp 'elsa-type (elsa-make-type Mixed -> Bool))
(put 'consp 'elsa-type (elsa-make-type Mixed -> Bool))
(put 'listp 'elsa-type (elsa-make-type Mixed -> Bool))

;; type conversion
(put 'string-to-number 'elsa-type (elsa-make-type String -> Number))
(put 'number-to-string 'elsa-type (elsa-make-type Number -> String))

;; list functions
(put 'list 'elsa-type (elsa-make-type Mixed -> List)) ;; TODO: variadic args?
(put 'car 'elsa-type (elsa-make-type Cons | Nil -> Mixed))
(put 'cdr 'elsa-type (elsa-make-type Cons | Nil -> Mixed))
(put 'nth 'elsa-type (elsa-make-type Int -> List -> Mixed))

;; string functions
(put 'split-string'elsa-type (elsa-make-type String -> String -> List String))

;; sequence functions

;; built-in variables
(put 'command-line-args-left 'elsa-type-var (elsa-make-type List String | Nil))

;; help.el
(put 'help-function-arglist 'elsa-type (elsa-make-type Symbol -> List Symbol))

(provide 'elsa-typed-builtin)
